{
  "workflow": {
    "id": 2985,
    "name": "AI-Powered Chatbot Workflow with MySQL Database Integration",
    "views": 4504,
    "recentViews": 11,
    "totalViews": 4504,
    "createdAt": "2025-02-23T06:09:53.667Z",
    "description": "# AI-Powered Chatbot Workflow with MySQL Integration\n\nThis guide shows you how to deploy a chatbot that lets you query your database using natural language. You will build a system that accepts chat messages, retains conversation history, constructs dynamic SQL queries, and returns responses generated by an AI model. By following these instructions, you will have a working solution that integrates n8nâ€™s AI Agent capabilities with MySQL.\n\n---\n\n## Prerequisites\n\nBefore you begin, ensure that you have the following:\n\n1. An active n8n instance (self-hosted or cloud) running version 1.50.0 or later.\n2. Valid MySQL credentials configured in n8n.\n3. API credentials for the Groq Chat Model (or your preferred AI language model).\n4. Basic familiarity with SQL and n8n node concepts such as chat triggers and memory buffers.\n5. Access to the [n8n Docs on AI Agents](https://docs.n8n.io/advanced-ai/) for further reference.\n\n---\n\n## Workflow Setup\n\n### 1. Chat Interface & Trigger\n\n- **When Chat Message Received**  \n  This node listens for incoming chat messages via a webhook. When a message arrives, it triggers the workflow immediately.\n\n### 2. Conversation Memory\n\n- **Chat History**  \n  This memory buffer node stores the last 10 interactions. It supplies conversation context to the AI Agent, ensuring that responses consider previous messages.\n\n### 3. AI Agent Core\n\n- **AI Agent (Tools Agent)**  \n  The AI Agent node orchestrates the conversation by receiving the chat input and conversation history. It dynamically generates SQL queries based on your requests and coordinates calls to external tools (such as MySQL nodes).\n\n### 4. Database Interactions\n\n- **MySQL Node**  \n  This node executes the SQL query generated by the AI Agent. You reference the query using an expression (e.g., `{{$node[\"AI Agent\"].json.sql_query}}`), allowing the agentâ€™s output to control data retrieval.\n\n- **MySQL Schema Node**  \n  This node retrieves a list of base tables from your MySQL database (excluding system schemas). The agent uses this information to understand the available tables.\n\n- **MySQL Definition Node**  \n  This node fetches detailed metadata (such as column names, data types, and relationships) for a specific table. The table and schema names are supplied dynamically by the AI Agent.\n\n### 5. Language Model Processing\n\n- **Groq Chat Model**  \n  This node connects to the Groq Chat API to generate text completions. It processes the combined input (chat message, context, and data fetched from MySQL) and produces the final response.\n\n### 6. Guidance & Customization\n\n- **Sticky Notes**  \n  These nodes provide guidance on:\n  - Switching the chat model if you wish to use another provider (e.g., OpenAI or Anthropic).\n  - Adjusting the maximum token count per interaction.\n  - Customizing the SQL queries and the context window size.\n  \nThey help you modify the workflow to suit your environment and requirements.\n\n### Workflow Connections\n\n- The **Chat Trigger** passes the incoming message to the **AI Agent**.\n- The **Chat History** node supplies conversation context to the AI Agent.\n- The **AI Agent** calls the MySQL nodes as external tools, generating and sending dynamic SQL queries.\n- The **Groq Chat Model** processes the consolidated input from the agent and outputs the natural language response delivered to the user.\n\n### Testing the Workflow\n\n1. Send a chat message using the chat interface.\n2. Observe how the AI Agent processes the input and generates a corresponding SQL query.\n3. Verify that the MySQL nodes execute the query and return data.\n4. Confirm that the Groq Chat Model produces a coherent natural language response.\n5. Refer to the sticky notes for guidance if you need to fine-tune any node settings.\n\n---\n\n## Next Steps and References\n\n- **Customize Your AI Model**  \n  Replace the Groq Chat Model with another language model (such as the OpenAI Chat Model) by updating the node credentials and configuration.\n\n- **Enhance Memory Settings**  \n  Adjust the Chat History nodeâ€™s context window to retain more or fewer messages based on your needs.\n\n- **Modify SQL Queries**  \n  Update the SQL queries in the MySQL nodes to match your specific database schema and desired data.\n\n- **Further Reading**  \n  Consult the [n8n Docs on AI Agents](https://docs.n8n.io/advanced-ai/) for additional details and examples to expand your workflowâ€™s capabilities.\n\n- **Set Up a Website Chatbot**\n  Copy & Paste and replace the placeholders in the following code to embed the chatbot into your personal or company's website: [View in CodePen ðŸ¡¥](https://codepen.io/olemai/pen/RNwPdVp)\n\n---\n\nBy following these steps, you will deploy a robust AI chatbot workflow that integrates with your MySQL database, allowing you to query data using natural language.\n",
    "workflow": {
      "meta": {
        "instanceId": "f0daacbbece4d36ce73ed214e506ba3899410c0e00a1b6cd1d93e012465d1082"
      },
      "nodes": [
        {
          "id": "e1055031-f1f1-44dd-8e3b-18b9f543aac2",
          "name": "When chat message received",
          "type": "@n8n/n8n-nodes-langchain.chatTrigger",
          "position": [
            -60,
            -80
          ],
          "webhookId": "cf1de04f-3e38-426c-89f0-3bdb110a5dcf",
          "parameters": {},
          "typeVersion": 1.1
        },
        {
          "id": "88eaaf60-aed6-4e9d-9667-d2838a8e7f78",
          "name": "Chat History",
          "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
          "position": [
            280,
            120
          ],
          "parameters": {},
          "typeVersion": 1.3
        },
        {
          "id": "a5b49dee-d5e4-4324-a7f8-1638e4e41abd",
          "name": "MySQL",
          "type": "n8n-nodes-base.mySqlTool",
          "position": [
            460,
            120
          ],
          "parameters": {},
          "typeVersion": 2.4
        },
        {
          "id": "7abfcdc7-dfc5-4627-a479-82dd38404c88",
          "name": "MySQL Schema",
          "type": "n8n-nodes-base.mySqlTool",
          "position": [
            640,
            120
          ],
          "parameters": {},
          "typeVersion": 2.4
        },
        {
          "id": "bc9dfb90-0696-4801-a5c2-741c2fd27855",
          "name": "MySQL Definition",
          "type": "n8n-nodes-base.mySqlTool",
          "position": [
            820,
            120
          ],
          "parameters": {},
          "typeVersion": 2.4
        },
        {
          "id": "fd8344a4-ee89-4365-ae36-cc39f26c47df",
          "name": "AI Agent",
          "type": "@n8n/n8n-nodes-langchain.agent",
          "position": [
            360,
            -80
          ],
          "parameters": {},
          "typeVersion": 1.7
        },
        {
          "id": "4849ec08-2ab9-46f2-bc8c-f9dad3196246",
          "name": "Groq Chat Model",
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "position": [
            100,
            120
          ],
          "parameters": {},
          "typeVersion": 1
        },
        {
          "id": "400a5f98-60af-4acb-950a-085402f3502d",
          "name": "Sticky Note1",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            60,
            300
          ],
          "parameters": {
            "content": ""
          },
          "typeVersion": 1
        },
        {
          "id": "5859cd82-9d6c-4783-8ef9-44cd4d800148",
          "name": "Sticky Note2",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            240,
            300
          ],
          "parameters": {
            "content": ""
          },
          "typeVersion": 1
        },
        {
          "id": "599c02ac-7246-4cab-8bdd-1f6565ece04d",
          "name": "Sticky Note3",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            420,
            300
          ],
          "parameters": {
            "content": ""
          },
          "typeVersion": 1
        },
        {
          "id": "33cbfb73-10e5-428b-ba71-539be16e7bc7",
          "name": "Sticky Note",
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -60,
            -300
          ],
          "parameters": {
            "content": ""
          },
          "typeVersion": 1
        }
      ],
      "pinData": {},
      "connections": {
        "MySQL": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "Chat History": {
          "ai_memory": [
            [
              {
                "node": "AI Agent",
                "type": "ai_memory",
                "index": 0
              }
            ]
          ]
        },
        "MySQL Schema": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "Groq Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "AI Agent",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "MySQL Definition": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        },
        "When chat message received": {
          "main": [
            [
              {
                "node": "AI Agent",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      }
    },
    "lastUpdatedBy": 16,
    "workflowInfo": {
      "nodeCount": 11,
      "nodeTypes": {
        "n8n-nodes-base.mySqlTool": {
          "count": 3
        },
        "n8n-nodes-base.stickyNote": {
          "count": 4
        },
        "@n8n/n8n-nodes-langchain.agent": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.lmChatGroq": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.chatTrigger": {
          "count": 1
        },
        "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
          "count": 1
        }
      }
    },
    "user": {
      "name": "Gegenfeld",
      "username": "gegenfeld",
      "bio": "We at Gegenfeld are an EdTech platform dedicated to delivering high-quality on-demand courses and interactive training sessions for professional development at all skill levels. With our commitment to \"Accelerate your future,\" we empower professionals to enhance their expertise through engaging, industry-focused learning experiences. On n8n, we share some of the workflows used in our interactive training to provide deeper insights and practical applications.",
      "verified": true,
      "links": [
        "https://gegenfeld.com"
      ],
      "avatar": "https://gravatar.com/avatar/c8a1c789de3e9122a421139cc2d7dc9ab404dfb76ac84a17fa487e8f607ae9ab?r=pg&d=retro&size=200"
    },
    "nodes": [
      {
        "id": 565,
        "icon": "fa:sticky-note",
        "name": "n8n-nodes-base.stickyNote",
        "codex": {
          "data": {
            "alias": [
              "Comments",
              "Notes",
              "Sticky"
            ],
            "categories": [
              "Core Nodes"
            ],
            "nodeVersion": "1.0",
            "codexVersion": "1.0",
            "subcategories": {
              "Core Nodes": [
                "Helpers"
              ]
            }
          }
        },
        "group": "[\"input\"]",
        "defaults": {
          "name": "Sticky Note",
          "color": "#FFD233"
        },
        "iconData": {
          "icon": "sticky-note",
          "type": "icon"
        },
        "displayName": "Sticky Note",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          }
        ]
      },
      {
        "id": 1119,
        "icon": "fa:robot",
        "name": "@n8n/n8n-nodes-langchain.agent",
        "codex": {
          "data": {
            "alias": [
              "LangChain",
              "Chat",
              "Conversational",
              "Plan and Execute",
              "ReAct",
              "Tools"
            ],
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Agents",
                "Root Nodes"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "AI Agent",
          "color": "#404040"
        },
        "iconData": {
          "icon": "robot",
          "type": "icon"
        },
        "displayName": "AI Agent",
        "typeVersion": 2,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1163,
        "icon": "fa:database",
        "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Memory"
              ],
              "Memory": [
                "For beginners"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Simple Memory"
        },
        "iconData": {
          "icon": "database",
          "type": "icon"
        },
        "displayName": "Simple Memory",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1247,
        "icon": "fa:comments",
        "name": "@n8n/n8n-nodes-langchain.chatTrigger",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
                }
              ]
            },
            "categories": [
              "Core Nodes",
              "Langchain"
            ]
          }
        },
        "group": "[\"trigger\"]",
        "defaults": {
          "name": "When chat message received"
        },
        "iconData": {
          "icon": "comments",
          "type": "icon"
        },
        "displayName": "Chat Trigger",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 9,
            "name": "Core Nodes"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      },
      {
        "id": 1263,
        "icon": "file:groq.svg",
        "name": "@n8n/n8n-nodes-langchain.lmChatGroq",
        "codex": {
          "data": {
            "resources": {
              "primaryDocumentation": [
                {
                  "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgroq/"
                }
              ]
            },
            "categories": [
              "AI",
              "Langchain"
            ],
            "subcategories": {
              "AI": [
                "Language Models",
                "Root Nodes"
              ],
              "Language Models": [
                "Chat Models (Recommended)"
              ]
            }
          }
        },
        "group": "[\"transform\"]",
        "defaults": {
          "name": "Groq Chat Model"
        },
        "iconData": {
          "type": "file",
          "fileBuffer": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgaWQ9IkxheWVyXzIiCiAgIHZpZXdCb3g9IjAgMCA0OTkuOTk5OTkgNDk5Ljk5OTk5IgogICB2ZXJzaW9uPSIxLjEiCiAgIHdpZHRoPSI1MDAiCiAgIGhlaWdodD0iNTAwIgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzCiAgICAgaWQ9ImRlZnM0IiAvPjxnCiAgICAgaWQ9IlBBR0VTIj48Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojZjU0ZjM1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjEzNjIyIgogICAgICAgaWQ9InBhdGg0IgogICAgICAgY3g9IjI1MCIKICAgICAgIGN5PSIyNTAiCiAgICAgICByPSIyNTAiIC8+PHBhdGgKICAgICAgIGQ9Ik0gMjUwLjUzNjY0LDk3LjEyMjk5NCBDIDE5Mi43MTkzMSw5Ni41ODg2MzggMTQ1LjQ4MjIyLDE0Mi45NzA3NSAxNDQuOTQ3ODYsMjAwLjc4ODA4IGMgLTAuNTM0MzQsNTcuODE3MzMgNDUuODQ3NzcsMTA1LjA1NDQyIDEwMy42NjUxLDEwNS41ODg3NyBoIDM2LjMzNjIxIHYgLTM5LjIyMTc0IGggLTM0LjQxMjUzIGMgLTM2LjEyMjQ4LDAuNDI3NSAtNjUuNzI1OCwtMjguNTM0NjIgLTY2LjE1MzI5LC02NC42NTcwOCAtMC40Mjc0OSwtMzYuMTIyNDggMjguNTM0NjMsLTY1LjcyNTgxIDY0LjY1NzA4LC02Ni4xNTMzIGggMS40OTYyMSBjIDM2LjEyMjQ4LDAgNjUuNDA1MiwyOS4yODI3MiA2NS41MTIwNyw2NS40MDUyIHYgMCA5Ni4zOTc4MyAwIGMgMCwzNS44MDE4NyAtMjkuMTc1ODUsNjQuOTc3NzMgLTY0Ljg3MDgzLDY1LjQwNTIxIC0xNy4wOTk0MSwtMC4xMDY4OCAtMzMuNDUwNzEsLTcuMDUzNTEgLTQ1LjUyNzE3LC0xOS4xMjk5NSBsIC0yNy43ODY1LDI3Ljc4NjUxIGMgMTkuMjM2ODEsMTkuMzQzNyA0NS4zMTMzOSwzMC4zNTE0MyA3Mi41NjU1NiwzMC42NzIwNSBoIDEuMzg5MzMgYyA1Ny4wNjkyNCwtMC44NTQ5NyAxMDIuOTE3LC00Ny4xMzAyMiAxMDMuMjM3NiwtMTA0LjE5OTQ1IFYgMTk5LjI5MTg5IEMgMzUzLjY2NzM5LDE0Mi40MzYzOSAzMDcuMjg1MjcsOTcuMTIyOTk0IDI1MC41MzY2NCw5Ny4xMjI5OTQgWiIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjBweCIKICAgICAgIGlkPSJwYXRoMS0zIiAvPjwvZz48L3N2Zz4K"
        },
        "displayName": "Groq Chat Model",
        "typeVersion": 1,
        "nodeCategories": [
          {
            "id": 25,
            "name": "AI"
          },
          {
            "id": 26,
            "name": "Langchain"
          }
        ]
      }
    ],
    "categories": [
      {
        "id": 5,
        "name": "Engineering"
      },
      {
        "id": 16,
        "name": "DevOps"
      },
      {
        "id": 18,
        "name": "Product"
      },
      {
        "id": 25,
        "name": "AI"
      },
      {
        "id": 28,
        "name": "IT Ops"
      }
    ],
    "image": []
  }
}